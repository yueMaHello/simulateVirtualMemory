# simulateVirtualMemory
A discrete event simulation program. Enable the study of key performance measures of a conceptual demand paging virtual memory system.
Through this project, I familiarized myself with different local page replacement algorithms, such as ‘lru’, ‘sec’, ‘mrand’, and ‘none’.
Design Overview:
1. The ‘mrefgen.c’ keeps generating synthetic reference string and passing the 32-bit address into ‘a4vmsim.c’. The 32-bit address line can be split into ‘page number’, ‘operation’, and ‘value’.
2. Four different page replacing algorithms implemented in this ‘a4vmsim.c’, which are ‘lru’, ‘sec’, ‘mrand’, and ‘none’.
3. ‘none’ strategy is mainly used to test the basic functions in the program. It uses a hash table to store all unique page numbers.
4. ‘sec’, ‘lru’, and ‘mrand’ all use an array to store and renew the page numbers.
5. For ‘sec’ strategy, I use two method to deal with the condition when all the references are ‘1’. The
professor’s method is to replace the current page which is pointed by the pointer. The second method is a more common method, which can be found from other books or some websites. It moves the pointer to the next page and replace that page when all the references are ‘1’s. I comment the second method in the code and use the professor’s method. Actually, both of the methods can work well, since the page faults producing by these two methods are very close.
6. All the functions are implemented in a single file ‘a4vmsim.c’.
7. Through ‘Makefile’, the user can make, clean and zip the program easily. ‘mrefgen.c’ will also be
compiled through the ‘make’ command. To run the program, just type ‘./run.sh’ in the terminal.
Project Status:
The project has been completed with all the functionality and features. There are several difficulties during the implementation:
1. Reading 32-bit number from ‘mrefgen.c’ is difficult, since I was not familiar with uint32_t format.
2. In ‘none’ strategy, I firstly used a very long array to store page numbers, which is extremely slow. Then, I decided to use a hash table to store page numbers, and the program became much faster than before.
3. ‘sec’ strategy make me confused a little bit, since the professor’s method is a little bit different than the one I found on the internet. Both of the two methods can work well.
Testing and Results:
I tested the program feature by feature. Since the inputs generated by the ‘mrefgen.c’ are random, it is difficult to test the strategies. After I finished four different strategies, I wrote a small script to control the inputs. For example, I let the input page numbers be {1,3,4,5,2,2,4,5,2,5,2}. I used the example shown on the lecture notes to test the algorithms. I adjusted the algorithms until the page faults are the same as the professor’s answer. Then I tested the algorithms through ‘run.sh’. The outputs are quite similar as the example in the assignment’s description. The ‘accumulator’ and ‘write counts’ are the same as the results in ‘mregen.c’
Acknowledgements:
https://www.tutorialspoint.com/data_structures_algorithms/hash_table_program_in_c.htm http://www.c4learn.com/c-programs/c-program-to-implement-stack-operations-using-array.html https://www.cs.utah.edu/~mflatt/past-courses/cs5460/lecture10.pdf.
